<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smhrd.mapper.nahonsanMapper">
    

    	<select id="login" resultType = "com.smhrd.mapper.guardianVO" >
    	    select * from guardian where email=#{email} and password=#{password} 
    	                                 <!-- 앞 db에 있는 값 뒤 사용자가 입력한 값-->
    	</select>
    	
    	<!--  신청 테이블 신청하면서 신청테이블 정보 넣기-->
    	<insert id="addnoin" parameterType="com.smhrd.mapper.requestVO">
    		insert into request(name,age,adress,phone,uniqueness) values(#{name},#{age},#{adress},
    		#{phone},#{uniqueness})
    	</insert>
    	
    	<!-- 관리 승인하면 노인테이블에선 신청테이블의 번호를가진 행 복사해서 넣고, 신청테이블에선 삭제하기. -->
		<insert id="add_del" parameterType="int">
		    INSERT INTO senior SELECT * FROM request WHERE idx = #{idx};
			delete from request where idx= #{idx};
		</insert>

</mapper>
